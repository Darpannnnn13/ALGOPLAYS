<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <title>Pattern Lock - AlgoPlay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto&display=swap" rel="stylesheet">
  <style>
    /* Make the body background transparent to see the starfield */
    body { background-color: transparent; font-family: 'Roboto', sans-serif; }
    .title-font { font-family: 'Orbitron', sans-serif; }
    .star-field {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #0C0A1A;
        overflow: hidden;
        z-index: -1;
    }
    .star {
        position: absolute; background: white; border-radius: 50%;
        animation: twinkle linear infinite;
    }
    @keyframes twinkle {
        0%, 100% { transform: scale(0.5); opacity: 0.5; }
        50% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>

<body class="text-white min-h-screen">
<div id="star-field" class="star-field"></div>
<!-- ✅ Navbar -->
<header class="fixed top-0 left-0 w-full backdrop-blur-lg bg-white/10 shadow z-50">
  <div class="max-w-7xl mx-auto flex flex-wrap justify-between items-center px-4 py-4">
    <h1 class="text-2xl font-bold text-green-400 title-font">AlgoPlay</h1>
    <nav class="flex flex-wrap items-center gap-4">
      <a href="/" class="hover:text-green-400 {% if active_page == 'home' %}text-green-400 font-bold{% endif %}">Home</a>
      <a href="/games" class="hover:text-green-400 {% if active_page == 'games' %}text-green-400 font-bold{% endif %}">Games</a>
      <a href="/leaderboard" class="hover:text-green-400 {% if active_page == 'leaderboard' %}text-green-400 font-bold{% endif %}">Leaderboard</a>
      <a href="/about" class="hover:text-green-400 {% if active_page == 'about' %}text-green-400 font-bold{% endif %}">About</a>

      {% if user %}
        <div onclick="toggleProfilePanel()" 
             class="w-10 h-10 flex items-center justify-center rounded-full bg-green-400 text-black font-bold cursor-pointer">
          {{ user.name[0]|upper }}
        </div>
      {% else %}
        <a href="{{ url_for('login') }}" 
           class="px-4 py-2 rounded bg-green-400 text-black font-bold hover:bg-green-300 transition">
          Login/Register
        </a>
      {% endif %}
    </nav>
  </div>
</header>

<!-- ✅ Logout Modal -->
<div id="logoutModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white text-black rounded-lg p-6 max-w-sm w-full">
    <h2 class="text-xl font-bold mb-4">Are you sure you want to logout?</h2>
    <div class="flex justify-end gap-4">
      <button onclick="closeLogoutModal()" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancel</button>
      <a href="{{ url_for('logout') }}" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Logout</a>
    </div>
  </div>
</div>
<!-- Main Content -->
<main class="pt-28 max-w-4xl mx-auto px-4 text-center">
  <h2 class="text-4xl font-bold mb-4 text-green-400 title-font">Pattern Lock</h2>
  <img src="{{ url_for('static', filename='images/Pattern_Lock.png') }}" alt="Pattern Lock Example"
       class="w-full h-64 object-cover rounded-lg mb-6 border-2 border-green-400">

  
  <p class="mb-4 text-gray-300">
    <b>Pattern Lock</b> challenges your visual memory and problem-solving skills. Watch a pattern being drawn on a 3x3 grid and replicate it as quickly as possible. You can also challenge different AI algorithms to see how they find the correct sequence of moves to crack the lock.
  </p>

  <h3 class="text-2xl font-bold mb-2">How to Play</h3>
  <p class="mb-4 text-gray-300">
    1️⃣ Choose a level to see the target pattern.<br>
    2️⃣ Click and drag on the grid to connect the dots and draw your pattern.<br>
    3️⃣ Release the mouse when you think your pattern is correct.<br>
    4️⃣ Try to match the pattern in the shortest time possible.<br>
    5️⃣ Watch how AI solvers like BFS, DFS, A*, and Greedy find the solution path!
  </p>

  <button onclick="window.location.href='/pattern_lock/levels'"
          class="mt-8 px-8 py-4 bg-green-500 text-black text-xl font-bold rounded-full hover:bg-green-400 transition">
    Play
  </button>
</main>
{% include 'profile_panel.html' %}

<!-- ✅ Scripts -->
<script>
  function toggleProfilePanel() {
    document.getElementById('profilePanel').classList.toggle('translate-x-full');
  }

  function openLogoutModal() {
    document.getElementById('logoutModal').classList.remove('hidden');
  }

  function closeLogoutModal() {
    document.getElementById('logoutModal').classList.add('hidden');
  }

  document.addEventListener('DOMContentLoaded', function() {
    const starField = document.getElementById('star-field');
    if (starField && !starField.hasChildNodes()) {
        for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.animationDuration = `${2 + Math.random() * 3}s`;
            star.style.animationDelay = `${Math.random() * 5}s`;
            starField.appendChild(star);
        }
    }
  });
</script>

</body>
</html>
