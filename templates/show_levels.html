<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Maze Levels</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>

<body class="bg-gray-900 text-white p-10 min-h-screen flex flex-col">

  <h1 class="text-4xl mb-10 font-bold text-green-400">Select a Level</h1>

  <div id="levelsContainer" class="grid grid-cols-2 md:grid-cols-5 gap-6 flex-grow"></div>

  <div class="mt-10">
    <a href="/maze_solver" class="inline-block px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded text-white font-semibold transition">
      ‚¨ÖÔ∏è Back to Maze Solver
    </a>
  </div>

  <script>
    const playedLevels = {{ played_levels | tojson | safe }};
    const difficulties = ['easy', 'medium', 'hard'];
    const colors = {
      easy: 'bg-green-500 hover:bg-green-400',
      medium: 'bg-yellow-500 hover:bg-yellow-400',
      hard: 'bg-red-500 hover:bg-red-400',
    };
    const container = document.getElementById('levelsContainer');

    difficulties.forEach(diff => {
      for (let i = 1; i <= 5; i++) {
        const key = `maze_${diff}-${i}`;
        const data = playedLevels[key];
        
        const isPlayed = !!data?.human_time;
        const timeTakenHtml = data?.human_time ? 
            `<div class="text-xs text-black bg-white/40 rounded px-2 py-0.5 mb-1">üßç You:  ${parseFloat(data.human_time).toFixed(2)}s</div>` : '';
        
        const bfsTimeHtml = data?.bfs_time ? 
            `<div class="text-xs bg-white/40 rounded px-2 py-0.5 mb-1" style="color: #2b6cb0;">ü§ñ BFS: ${parseFloat(data.bfs_time).toFixed(7)}s</div>` : '';
            
        const dfsTimeHtml = data?.dfs_time ? 
            `<div class="text-xs bg-white/40 rounded px-2 py-0.5 mb-1" style="color: #6b46c1;">ü§ñ DFS: ${parseFloat(data.dfs_time).toFixed(7)}s</div>` : '';

        const astarTimeHtml = data?.astar_time ? 
            `<div class="text-xs bg-white/40 rounded px-2 py-0.5 mb-1" style="color: #b83280;">ü§ñ A*: ${parseFloat(data.astar_time).toFixed(7)}s</div>` : '';

        const greedyTimeHtml = data?.greedy_time ? 
            `<div class="text-xs bg-white/40 rounded px-2 py-0.5 mb-1" style="color: #0d9488;">ü§ñ Greedy: ${parseFloat(data.greedy_time).toFixed(7)}s</div>` : '';

        const link = document.createElement('a');
        link.href = `/level/maze/${diff}/${i}`;
        link.className = `flex flex-col items-center justify-center p-4 rounded-lg ${colors[diff]} text-black font-semibold transition`;

        link.innerHTML = `
          <span class="text-lg font-bold">${diff.toUpperCase()} Level ${i}</span>
          ${isPlayed 
            ? `<i class="fas fa-star text-black text-xl mt-2"></i>` 
            : `<i class="far fa-star text-black text-xl mt-2"></i>`}
          <div class="flex flex-col items-start mt-2 w-full pl-2">
            ${timeTakenHtml}
            ${bfsTimeHtml}
            ${dfsTimeHtml}
            ${astarTimeHtml}
            ${greedyTimeHtml}
          </div>
        `;
        container.appendChild(link);
      }
    });
  </script>
</body>
</html>

