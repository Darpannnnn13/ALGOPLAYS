<!DOCTYPE html>
<html lang="en" class="bg-gray-900 text-white">
<head>
  <meta charset="UTF-8" />
  <title>Edit Profile - AlgoPlay</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .star-field {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #0C0A1A;
        overflow: hidden;
        z-index: -1;
    }
    .star {
        position: absolute; background: white; border-radius: 50%;
        animation: twinkle linear infinite;
    }
    @keyframes twinkle {
        0%, 100% { transform: scale(0.5); opacity: 0.5; }
        50% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen">
  <div id="star-field" class="star-field"></div>
  <div class="w-full max-w-md p-8 space-y-6 bg-gray-800 rounded-lg shadow-lg">
    <h1 class="text-3xl font-bold text-center text-green-400">Edit Your Profile</h1>
    {% if error %}
      <p class="text-red-400 text-center">{{ error }}</p>
    {% endif %}
    <form method="POST" action="{{ url_for('edit_profile') }}">
      <div>
        <label for="name" class="block mb-2 text-sm font-medium text-gray-300">Full Name</label>
        <input type="text" name="name" id="name" value="{{ user.name }}" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:ring-green-500 focus:border-green-500">
      </div>
      <div class="mt-4">
        <label for="username" class="block mb-2 text-sm font-medium text-gray-300">Username</label>
        <input type="text" name="username" id="username" value="{{ user.username }}" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:ring-green-500 focus:border-green-500">
        <small class="text-gray-400">Username must be at least 6 characters & contain a digit.</small>
      </div>
      <div class="mt-4">
        <label for="email" class="block mb-2 text-sm font-medium text-gray-300">Email (cannot be changed)</label>
        <input type="email" name="email" id="email" value="{{ user.email }}" readonly class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md cursor-not-allowed">
      </div>
      <div class="mt-4">
        <label for="password" class="block mb-2 text-sm font-medium text-gray-300">New Password (optional)</label>
        <input type="password" name="password" id="password" placeholder="Leave blank to keep current password" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:ring-green-500 focus:border-green-500">
      </div>
      <div class="mt-4">
        <label for="gender" class="block mb-2 text-sm font-medium text-gray-300">Gender</label>
        <select name="gender" id="gender" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:ring-green-500 focus:border-green-500">
          <option value="Male" {% if user.gender == 'Male' %}selected{% endif %}>Male</option>
          <option value="Female" {% if user.gender == 'Female' %}selected{% endif %}>Female</option>
          <option value="Other" {% if user.gender == 'Other' %}selected{% endif %}>Other</option>
        </select>
      </div>
      <div class="flex items-center justify-between mt-6">
        <a href="{{ url_for('home') }}" class="text-sm text-gray-400 hover:text-green-400">Cancel</a>
        <button type="submit" class="px-6 py-2 font-bold text-black bg-green-500 rounded-md hover:bg-green-400 transition">Save Changes</button>
      </div>
    </form>
  </div>
  <script>
    // Starfield animation
    const starField = document.getElementById('star-field');
    if (starField && !starField.hasChildNodes()) {
        for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.animationDuration = `${2 + Math.random() * 3}s`;
            star.style.animationDelay = `${Math.random() * 5}s`;
            starField.appendChild(star);
        }
    }
  </script>
</body>
</html>
